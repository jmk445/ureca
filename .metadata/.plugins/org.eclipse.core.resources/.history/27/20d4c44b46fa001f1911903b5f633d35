package app.phone.ui;

import java.awt.BorderLayout;
import java.util.List;

import javax.swing.JButton;
import javax.swing.JFrame; // windows application
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;

import app.phone.dao.PhoneDao;
import app.phone.dto.Phone;

public class MallManager extends JFrame { 

	private JTable table; // grid ui component
	private DefaultTableModel tableModel;// grid data
	private JButton shoppingCartButton;
	private JTextField searchWordField;
	
	// PhoneDao
	private PhoneDao PhoneDao = new PhoneDao();
	
	public MallManager() {
		// 화면 UI 와 관련된 설정
		setTitle("앗 휴대폰 신발보다 싸다");
		setSize(600, 400);
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setLocationRelativeTo(null);
		
		// table
		tableModel = new DefaultTableModel(new Object[] {"모델명", "가격(원)","제조사","재고"}, 0) {
            @Override
            public boolean isCellEditable(int row, int column) {
                return false; // All cells are not editable
            }
		};
		table = new JTable(tableModel);
		
		
		
		listPhone(); //왜 tablemodel을 수정했는데 table이 수정돼지?
		
		
		shoppingCartButton = new JButton("장바구니");
		JPanel bottomPanel = new JPanel();
		bottomPanel.add(shoppingCartButton);
				
		setLayout(new BorderLayout());		
		add(new JScrollPane(table), BorderLayout.CENTER);
		add(bottomPanel, BorderLayout.SOUTH);
		
	}

	private void clearTable() {
		tableModel.setRowCount(0);
	}
	
	private void listPhone() {
		clearTable();
		
		List<Phone> phoneList = PhoneDao.listPhone();
		
		for (Phone phone : phoneList) {
			tableModel.addRow(new Object[] {phone.getPhoneName(), phone.getPhoneprice(), phone.getPhonemaker(),phone.getPhoneremain() });
		}
	}
	public static void main(String[] args) {
		SwingUtilities.invokeLater( () -> {
			new MallManager().setVisible(true);
		});
		
	}

}
